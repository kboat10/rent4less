<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rent4Less | Available Homes</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <nav class="navbar">
          <a class="brand" href="index.html">
            <img class="brand-mark" src="rent4less.jpeg" alt="Rent4Less logo" />
            <div>
              <span class="brand-eyebrow">Rent4Less</span>
              <h1>Homes that work for modern Ghana</h1>
            </div>
          </a>
          <div class="nav-links">
            <a href="model.html">Model</a>
            <a href="listings.html" class="is-active">Homes</a>
            <a href="rent-calculator.html">Affordability</a>
            <a href="tenant-tools.html">Tenant tools</a>
            <a href="list-property.html" class="button button-primary"
              >List property</a
            >
          </div>
        </nav>
      </div>
    </header>

    <section class="page-hero">
      <div class="container">
        <h2>Browse verified Rent4Less homes</h2>
        <p>
          Filter homes by budget and payment flexibility, then save favourites to share
          with family or HR before you apply.
        </p>
      </div>
    </section>

    <main>
      <section class="section" id="listings">
        <div class="container">
          <div class="section-header">
            <p class="eyebrow">Featured inventory</p>
            <h3>Curated homes ready for flexible rent plans</h3>
            <p>
              Apply filters to see rentals aligned with your income, household, and
              payment preferences. Every listing includes transparency around pricing and
              tenant expectations.
            </p>
            <p id="listingsCount" style="margin-top: 12px; color: var(--color-muted); font-size: 0.95rem;">
              Showing <strong id="listingsCountNumber">0</strong> verified properties
            </p>
          </div>

          <div class="listing-controls surface-card">
            <div class="control-group">
              <label for="budgetFilter">Budget (GHS/month)</label>
              <input type="number" id="budgetFilter" placeholder="e.g. 2500" min="0" />
            </div>
            <div class="control-group">
              <label for="locationFilter">Location</label>
              <select id="locationFilter">
                <option value="Any">Any Location</option>
                <option value="Accra">Accra</option>
                <option value="Kumasi">Kumasi</option>
                <option value="Tema">Tema</option>
                <option value="Takoradi">Takoradi</option>
                <option value="Cape Coast">Cape Coast</option>
              </select>
            </div>
            <div class="control-group">
              <label for="roomTypeFilter">Room Type</label>
              <select id="roomTypeFilter">
                <option value="Any">Any Type</option>
                <option value="Shared">Shared Room</option>
                <option value="Private">Private Room</option>
                <option value="Studio">Studio</option>
                <option value="Apartment">Apartment</option>
              </select>
            </div>
            <div class="control-group">
              <label for="flexibilityFilter">Payment plan</label>
              <select id="flexibilityFilter">
                <option value="Any">Any</option>
                <option value="Monthly">Monthly</option>
                <option value="Quarterly">Quarterly</option>
                <option value="Monthly or Quarterly">Monthly or Quarterly</option>
              </select>
            </div>
            <div class="control-actions">
              <button id="applyFilters" class="button button-primary subtle">
                Apply
              </button>
              <button id="resetFilters" class="button button-ghost subtle">Reset</button>
            </div>
          </div>

          <div id="listingGrid" class="listing-grid"></div>
        </div>
      </section>

      <section class="section section-neutral" id="saved-homes">
        <div class="container">
          <div class="section-header">
            <p class="eyebrow">Shortlist</p>
            <h3>Your saved homes</h3>
            <p>
              Keep track of apartments you love, share them with family or HR, and return
              when you are ready to apply. Your shortlist stays in sync on this device.
            </p>
          </div>
          <div id="savedGrid" class="listing-grid"></div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div class="footer-brand">
          <img class="footer-logo" src="rent4less.jpeg" alt="Rent4Less logo" />
          <div>
            <span class="brand-eyebrow">Rent4Less</span>
            <h4>Affordable housing with verified trust.</h4>
            <p>
              We help working-class Ghanaians secure flexible rent while giving landlords
              the assurance of guaranteed payouts.
            </p>
          </div>
        </div>
        <div>
          <h5>For tenants</h5>
          <ul>
            <li><a href="listings.html">Browse homes</a></li>
            <li><a href="rent-calculator.html">Rent calculator</a></li>
            <li><a href="tenant-tools.html">Tenant tools</a></li>
          </ul>
        </div>
        <div>
          <h5>For landlords</h5>
          <ul>
            <li><a href="list-property.html">List a property</a></li>
            <li><a href="model.html#partners">Partnerships</a></li>
            <li><a href="model.html#how-it-works">Verification model</a></li>
          </ul>
        </div>
        <div>
          <h5>Stay informed</h5>
          <form class="newsletter-form">
            <input type="email" placeholder="Work email" />
            <button type="submit">Subscribe</button>
          </form>
        </div>
      </div>
      <p class="footer-meta">¬© <span id="year"></span> Rent4Less. All rights reserved.</p>
    </footer>

    <div class="modal" id="propertyModal">
      <div class="modal-content property-modal">
        <button class="modal-close" data-close>&times;</button>
        <div id="propertyModalContent"></div>
      </div>
    </div>

    <!-- Viewing Request Modal -->
    <div class="modal" id="viewingRequestModal">
      <div class="modal-content">
        <button class="modal-close" data-close>&times;</button>
        <h4>Request a Viewing</h4>
        <form id="viewingRequestForm" class="property-form">
          <label>
            Full Name *
            <input type="text" name="name" required />
          </label>
          <label>
            Phone Number *
            <input type="tel" name="phone" required />
          </label>
          <label>
            Email
            <input type="email" name="email" />
          </label>
          <label>
            Preferred Viewing Date
            <input type="date" name="preferredDate" />
          </label>
          <label class="full-width">
            Additional Message
            <textarea name="message" rows="3" placeholder="Any specific questions or requests..."></textarea>
          </label>
          <input type="hidden" id="viewingPropertyId" name="propertyId" />
          <button type="submit" class="button button-primary">Submit Request</button>
          <p class="form-footnote">
            Our team will contact you via WhatsApp within 24 hours to confirm your viewing appointment.
          </p>
        </form>
      </div>
    </div>

    <script src="script.js" defer></script>
    <script>
      // Test script connection
      console.log("‚úÖ listings.html script tag executed");
      console.log("üìÑ Page URL:", window.location.href);
      
      // Verify script.js loaded - check after a delay to ensure script has executed
      window.addEventListener('load', function() {
        console.log("‚úÖ Page fully loaded");
        console.log("üîç Checking for listingGrid:", !!document.getElementById("listingGrid"));
        
        // Wait a bit for script to execute
        setTimeout(function() {
          console.log("üîç Properties array exists:", typeof properties !== 'undefined');
          if (typeof properties !== 'undefined') {
            console.log("üîç Properties count:", properties.length);
            // Force render if properties exist but aren't showing
            if (properties.length > 0) {
              const listingGrid = document.getElementById("listingGrid");
              if (listingGrid && listingGrid.children.length === 0) {
                console.log("‚ö†Ô∏è Properties exist but not rendered - forcing render...");
                if (typeof renderWithActiveFilters === 'function') {
                  renderWithActiveFilters();
                }
              }
            }
          } else {
            console.error("‚ùå Properties still undefined after script load!");
          }
        }, 500);
      });
    </script>
  </body>
</html>

